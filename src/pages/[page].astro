---
import type { GetStaticPaths } from "astro";
import type { Component } from "mdx/types";
import type { Frontmatter } from "src/types";

import PageLayout from "../layouts/PageLayout.astro";

export const getStaticPaths: GetStaticPaths = async () => {
  const pages = await Astro.glob(`/content/pages/**/*.mdx`);

  return pages.map((page) => {
    return {
      params: { page: page.url?.slice(1, -1) },
      props: { page: { ...page } },
    };
  });
};

export interface Props {
  page: {
    Content: Component<unknown>;
    frontmatter: Frontmatter;
  };
}

const { page } = Astro.props;
---

<PageLayout page={page} />
